<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>{{ isLogin ? 'Login' : 'Register' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form *ngIf="isLogin" #f="ngForm" (ngSubmit)="onSubmit(f)">
    <ion-grid>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="email"
            ngModel
            name="email"
            type="email"
            required
            email
            #emailCntrl="ngModel"
          >
          </ion-input>
          <ion-label
            class="form-error"
            *ngIf="!emailCntrl.valid && emailCntrl.touched"
            lines="none"
            >Should be a valid Email Addres!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-input
            fill="outline"
            class="form-input"
            placeholder="password"
            ngModel
            name="password"
            type="password"
            required
            minlength="6"
            #passwordCntrl="ngModel"
          >
          </ion-input>
          <ion-label
            class="form-error"
            *ngIf="!passwordCntrl.valid && passwordCntrl.touched"
            lines="none"
            >Should be a valid password and min 6 character!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item *ngIf="loginErrorService !== ''">
            <ion-text color="danger">{{ loginErrorService }}</ion-text>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="ion-text-center">
      <ion-button
        type="submit"
        color="primary"
        *ngIf="!isLoading"
        [disabled]="!f.valid"
        >Login</ion-button
      >
    </div>
  </form>

  <form
    *ngIf="!isLogin"
    #registerForm="ngForm"
    (ngSubmit)="onRegister(registerForm)"
  >
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="email"
            ngModel
            name="emailRegister"
            type="email"
            required
            email
            #emailRegisterCntrl="ngModel"
          >
          </ion-input>
          <ion-label
            class="form-error"
            *ngIf="!emailRegisterCntrl.valid && emailRegisterCntrl.touched"
            lines="none"
            >Should be a valid Email Addres!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="password"
            ngModel
            name="passwordRegister"
            type="password"
            required
            minlength="6"
            #passwordRegisterCntrl="ngModel"
          ></ion-input>
          <ion-label
            class="form-error"
            *ngIf="!passwordRegisterCntrl.valid && passwordRegisterCntrl.touched"
            lines="none"
            >Should be a valid password!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="first name"
            ngModel
            name="firstNameRegister"
            type="text"
            required
            minlength="2"
            #firstNameRegisterCntrl="ngModel"
          ></ion-input>
          <ion-label
            class="form-error"
            *ngIf="!firstNameRegisterCntrl.valid && firstNameRegisterCntrl.touched"
            lines="none"
            >Should be a valid firstname!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="last name"
            ngModel
            name="lastNameRegister"
            type="text"
            required
            minlength="2"
            #lastNameRegisterCntrl="ngModel"
          ></ion-input>
          <ion-label
            class="form-error"
            *ngIf="!lastNameRegisterCntrl.valid && lastNameRegisterCntrl.touched"
            lines="none"
            >Should be a valid lastname!</ion-label
          >
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-input
            class="form-input"
            fill="outline"
            placeholder="phone number"
            ngModel
            name="phoneNumberRegister"
            type="number"
            required
            minlength="6"
            #phoneNumberRegisterCntrl="ngModel"
          ></ion-input>
          <ion-label
            class="form-error"
            *ngIf="!phoneNumberRegisterCntrl.valid && phoneNumberRegisterCntrl.touched"
            lines="none"
            >Should be a valid phonenumber!</ion-label
          >
        </ion-col>
      </ion-row>
      <div class="ion-text-center">
        <ion-button
          type="submit"
          color="primary"
          *ngIf="!isLoading"
          [disabled]="!registerForm.valid"
          >Register</ion-button
        >
      </div>
    </ion-grid>
  </form>
  <div class="ion-text-center">
    <ion-button
      fill="clear"
      type="button"
      color="primary"
      (click)="onSwitchAuthMode()"
      >Switch the {{ isLogin ? 'Register' : 'Login' }}</ion-button
    >
  </div>
</ion-content>
